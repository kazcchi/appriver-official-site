<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>リダイレクト中...</title>
    <meta http-equiv="refresh" content="5" />
    <meta name="robots" content="noindex, nofollow" />

    <script>
      // Vercel Analytics: pageview を送るためのローダ
      window.va = window.va || function () {
        (window.vaq = window.vaq || []).push(arguments);
      };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>

    <style>
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans JP', Arial,
          sans-serif;
        margin: 0;
        padding: 2rem;
        color: #333;
      }
      .box {
        max-width: 560px;
        margin: 10vh auto 0;
        border: 1px solid #eee;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 6px 24px rgba(0, 0, 0, 0.06);
      }
      .title {
        margin: 0 0 0.25rem;
        font-size: 1.25rem;
        font-weight: 600;
      }
      .url {
        word-break: break-all;
        color: #666;
        font-size: 0.9rem;
      }
      .hint {
        margin-top: 0.75rem;
        color: #666;
        font-size: 0.9rem;
      }
      .link {
        display: inline-block;
        margin-top: 1rem;
        color: #0b6bcb;
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <div class="box">
      <div class="title">外部サイトへ移動します</div>
      <div class="url" id="dest">読み込み中...</div>
      <div class="hint">自動で切り替わらない場合は以下をクリックしてください。</div>
      <a class="link" id="link" href="#" rel="nofollow noopener">今すぐ移動</a>
    </div>

    <script>
      (function () {
        var params = new URLSearchParams(location.search);
        var to = window.REDIRECT_TO || params.get('to');
        try {
          if (to) to = decodeURIComponent(to);
        } catch (_) {}
        var linkEl = document.getElementById('link');
        var destEl = document.getElementById('dest');
        if (to) {
          linkEl.href = to;
          destEl.textContent = to;
        } else {
          destEl.textContent = 'リンク先URLが見つかりませんでした。';
        }

        // ページビュー送信の猶予を確保してから遷移（約300ms）
        window.addEventListener('load', function () {
          setTimeout(function () {
            if (to) location.replace(to);
          }, 300);
        });
      })();
    </script>
  </body>
  </html>
